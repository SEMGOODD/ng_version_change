{"ast":null,"code":"import { tap, map, delay } from \"rxjs/operators\";\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let GameService = /*#__PURE__*/(() => {\n  class GameService {\n    constructor(http) {\n      this.http = http;\n      this.selectedCard1 = null;\n      this.selectedCard2 = null;\n      this.cardCount = 0;\n      this.moveCount = 0;\n      this.cards = [];\n      this.card = new BehaviorSubject(null);\n      this.coverCards = new BehaviorSubject([]);\n      this.remainingCardPairs = new BehaviorSubject(8);\n      this.doneMoves = new BehaviorSubject(0);\n    }\n    getCards(count) {\n      this.cardCount = count;\n      this.moveCount = 0;\n      this.remainingCardPairs.next(this.cardCount);\n      this.doneMoves.next(0);\n      return this.http.get('assets/cards.json').pipe(tap(arr => {\n        this.shuffleCards(arr);\n      }), map(d => {\n        let arr = d.slice(0, count);\n        return this.shuffleCards([...arr, ...this.shuffleCards(arr)]);\n      }));\n    }\n    shuffleCards(arr) {\n      for (let index = 0; index < arr.length; index++) {\n        const temp = arr[index];\n        const newIdx = Math.floor(Math.random() * arr.length);\n        arr[index] = arr[newIdx];\n        arr[newIdx] = temp;\n      }\n      return arr;\n    }\n    controlCards(choosen) {\n      if (this.selectedCard1 === null) {\n        this.selectedCard1 = choosen;\n      } else {\n        if (choosen.id === this.selectedCard1.id) {\n          return;\n        }\n        this.selectedCard2 = choosen;\n        if (this.selectedCard1.code != this.selectedCard2.code) {\n          this.coverCards.next([this.selectedCard1, this.selectedCard2]);\n        } else {\n          this.cardCount--;\n          this.remainingCardPairs.next(this.cardCount);\n        }\n        this.selectedCard1 = null;\n        this.selectedCard2 = null;\n        this.moveCount++;\n        setTimeout(() => {\n          this.doneMoves.next(this.moveCount);\n        }, 1200);\n      }\n    }\n    getRemainingCardPairs() {\n      return this.remainingCardPairs.asObservable();\n    }\n    getDoneMoves() {\n      return this.doneMoves.asObservable();\n    }\n    getCoveredCards() {\n      return this.coverCards.asObservable().pipe(delay(1200));\n    }\n    static {\n      this.ɵfac = function GameService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || GameService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: GameService,\n        factory: GameService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return GameService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}